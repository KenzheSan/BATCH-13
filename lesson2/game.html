<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../lesson.css" />
    <title>üíé –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞</title>
    <style>
      #gameBox {
        width: 250px;
        height: 250px;
        border: 20px solid rgb(234, 227, 227);
        position: relative;
        overflow: hidden;
      }
      #activePart {
        position: absolute;
        width: 50%;
        height: 50%;
        background-color: white;
        transition: all 3s;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <p class="backLink">
        <a
          class="link-opacity-10-hover"
          style="color: white"
          href="../index.html"
          >–ù–∞–∑–∞–¥</a
        >
      </p>

      <div class="mt-5">
        <div>
          <button class="btn btn-primary mb-5" onclick="startGame()">
            –°—Ç–∞—Ä—Ç
          </button>
          <div id="timer">–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: 60 —Å–µ–∫—É–Ω–¥</div>
        </div>

        <div id="gameBox">
          <div id="activePart"></div>
        </div>
        <button
          class="btn btn-primary ml-2 mt-5"
          onclick="checkPosition('top')"
        >
          top
        </button>
        <button
          class="btn btn-primary ml-2 mt-5"
          onclick="checkPosition('bottom')"
        >
          bottom
        </button>

        <button
          class="btn btn-primary ml-2 mt-5"
          onclick="checkPosition('left')"
        >
          left
        </button>
        <button
          class="btn btn-primary ml-2 mt-5"
          onclick="checkPosition('right')"
        >
          right
        </button>

        <button
          class="btn btn-primary ml-2 mt-5"
          onclick="checkPosition('none')"
        >
          none
        </button>

        <div id="result"></div>
      </div>
    </div>
    <script>
      let currentPos = "none";
      let correctGuesses = 0;
      let timeHtml = document.getElementById("time");
      let timer, countdown;
      let timeLeft = 60;
      let hasAnswered = false; // –ë—ã–ª –ª–∏ –¥–∞–Ω –æ—Ç–≤–µ—Ç

      function startGame() {
        correctGuesses = 0;
        timeLeft = 60;
        updateTimer();
        updateResult();
        changeBorderColor("none");
        clearInterval(timer);
        clearInterval(countdown);
        timer = setInterval(changePosition, 3000);
        countdown = setInterval(updateTimer, 1000);
        setTimeout(endGame, 60000);
      }

      function updateTimer() {
        if (timeLeft > 0) {
          timeLeft--;
          document.getElementById(
            "timer"
          ).innerText = `–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: ${timeLeft} —Å–µ–∫—É–Ω–¥`;
        } else {
          endGame();
        }
      }

      function changePosition() {
        hasAnswered = false;
        const positions = ["top", "right", "bottom", "left", "none"];
        currentPos = positions[Math.floor(Math.random() * positions.length)];
        changeBorderColor(currentPos);
      }
      function changeBorderColor(pos) {
        const gameBox = document.getElementById("gameBox");
        const activeColor = "red";
        const inactiveColor = "aqua";

        if (pos === "none") {
          gameBox.style.borderTopColor = "white";
          gameBox.style.borderRightColor = "white";
          gameBox.style.borderBottomColor = "white";
          gameBox.style.borderLeftColor = "white";
        } else {
          gameBox.style.borderTopColor =
            pos === "top" ? activeColor : inactiveColor;
          gameBox.style.borderRightColor =
            pos === "right" ? activeColor : inactiveColor;
          gameBox.style.borderBottomColor =
            pos === "bottom" ? activeColor : inactiveColor;
          gameBox.style.borderLeftColor =
            pos === "left" ? activeColor : inactiveColor;
        }
      }

      function checkPosition(pos) {
        if (!hasAnswered && pos === currentPos) {
          correctGuesses++;
          updateResult();
          hasAnswered = true;
        }
      }
      function updateResult() {
        document.getElementById(
          "result"
        ).innerText = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã: ${correctGuesses}`;
      }

      function endGame() {
        clearInterval(timer);
        clearInterval(countdown);
        alert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ ${correctGuesses} —Ä–∞–∑.`);
        changeBorderColor("none");
      }

      window.onload = () => {
        changeBorderColor("none");
      };
    </script>
  </body>
</html>
